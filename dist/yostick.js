!function(e){function t(e,t,s,o){3==arguments.length&&"boolean"!=typeof s&&(o=s,s=!1);var i;return function(){var n=arguments;o=o||this,s&&!i&&e.apply(o,n),clearTimeout(i),i=setTimeout(function(){s||e.apply(o,n),i=null},t)}}function s(t,o){var i=this instanceof s?this:e.extend({},s.prototype),n=i,a=e.extend({scroller:".yostick__scroller",section:".yostick__section",sectionContent:".yostick__list",sectionHeaderWrapper:".yostick__section-header",sectionHeader:".yostick__section-header-in",sectionIsCollapsed:"_collapsed",sectionTitleIsSticked:"_sticked",sectionTitleIsHustled:"_hustled",collapseOnClick:!0},o);n.params=a,n.root=t,n.elements={scroller:t.find(a.scroller),sections:t.find(a.section)},n.data=n._getData(!0),n.listeners=[],n._getHandlers(),n._setListeners()}if("undefined"!=typeof window){var o={_getHandlers:function(){var s=this;s.listeners.push({eventType:"scroll",selector:s.params.scroller,handler:function(){s._onScroll()}}),s.listeners.push({eventType:"resize",selector:"html, body",handler:t(s.update,1e3)}),s.params.collapseOnClick&&s.listeners.push({eventType:"click",selector:s.params.sectionHeader,handler:function(){var t=e(this);s._onCollapse(t)}})},_setListeners:function(){for(var t=this,s=0,o=t.listeners.length;o>s;s++)e(t.listeners[s].selector).on(t.listeners[s].eventType,t.listeners[s].handler)},_getData:function(t){var s=this,o=[];return s.elements.sections.each(function(i){var n=e(this),a=n.find(s.params.sectionHeaderWrapper),r=n.find(s.params.sectionHeader);o[i]={element:r,position:a[0].offsetTop,width:a.outerWidth(),height:a.outerHeight()},t&&n.attr("data-yostick-section-id",i)}),o},_onScroll:function(){var e=this,t=e.elements.scroller.scrollTop();e._apply(e._getCurrentSection(t),t)},_getCurrentSection:function(e){for(var t,s,o=this,i=0,n=o.data.length;n>i;i++)if(t=o.data[i],s=o.data[i+1],t.position<e&&(s.position>e||i+1==n))return i},_apply:function(e,t){for(var s,o,i,n=this.params,a=this.data[e],r=this.data[e+1],l=0,c=this.data.length;c>l;l++)o=[],l==e?(i=0,o.push(n.sectionTitleIsSticked),r.position<t+a.height&&(i=r.position-t-a.height,o.push(n.sectionTitleIsHustled)),s={position:"absolute",top:0,width:this.data[l].width+"px",transform:"translateY("+i+"px)"}):s={position:"relative",top:"auto",transform:"none"},this.data[l].element.removeClass([n.sectionTitleIsSticked,n.sectionTitleIsHustled].join(" ")).addClass(o.join(" ")).css(s)},_onCollapse:function(e){var t,s,o=this,i=o.elements.scroller,n=i.scrollTop(),a=e.closest(o.params.section),r=+a.attr("data-yostick-section-id"),l=n;a.hasClass(o.params.sectionIsCollapsed)?a.removeClass(o.params.sectionIsCollapsed):a.addClass(o.params.sectionIsCollapsed),o.data=o._getData(),t=o.data[r],s=o.data[r+1],t.position<n?l=t.position:s&&s.position<n+t.height&&(l=s.position-n-t.height),i.scrollTop(l),o._apply(o._getCurrentSection(l),l)},update:function(){var e,t=this;t.elements={scroller:t.root.find(t.params.scroller),sections:t.root.find(t.params.section)},t.data=t._getData(!0),e=t.elements.scroller.scrollTop(),t._apply(t._getCurrentSection(e),e)},destroy:function(){for(var t=this,s=0,o=t.listeners.length;o>s;s++)e(t.listeners[s].selector).off(t.listeners[s].eventType,t.listeners[s].handler);t.elements.sections.each(function(){var s=e(this);s.removeAttr("data-yostick-section-id").find(t.params.sectionHeader).removeClass([t.params.sectionIsCollapsed,t.params.sectionTitleIsSticked,t.params.sectionTitleIsHustled].join(" ")).attr("style","")}),delete t.root[0].yostick}};s.prototype=o,window.yostick=s,e.fn.yostick=function(t){var i=arguments;return o[t]?this.each(function(){var e=this&&this.yostick;e&&o[t].apply(e,Array.prototype.slice.call(i,1))}):"object"!=typeof t&&t?void e.error("Unknown method: "+t):this.each(function(){this.yostick=new s(e(this),i)})}}}(jQuery);