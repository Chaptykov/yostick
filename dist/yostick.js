!function(e){function t(e,t,s,i){3==arguments.length&&"boolean"!=typeof s&&(i=s,s=!1);var n;return function(){var o=arguments;i=i||this,s&&!n&&e.apply(i,o),clearTimeout(n),n=setTimeout(function(){s||e.apply(i,o),n=null},t)}}function s(t,i){var n=this instanceof s?this:e.extend({},s.prototype),o=n,r=e.extend({scroller:".yostick__scroller",section:".yostick__section",sectionContent:".yostick__list",sectionHeaderWrapper:".yostick__section-header",sectionHeader:".yostick__section-header-in",sectionIsCollapsed:"_collapsed",sectionTitleIsSticked:"_sticked",sectionTitleIsHustled:"_hustled",collapseOnClick:!0},i);o.params=r,o.root=t,o.elements={scroller:t.find(r.scroller),sections:t.find(r.section)},o.data=o._getData(!0),o.listeners=[],o._getHandlers(),o._bindListeners()}if("undefined"!=typeof window){var i={_getHandlers:function(){var s=this;s.listeners.push({eventType:"scroll",selector:s.params.scroller,handler:function(){s._onScroll()}}),s.listeners.push({eventType:"resize",selector:"html, body",handler:t(s.update,1e3)}),s.params.collapseOnClick&&s.listeners.push({eventType:"click",selector:s.params.sectionHeader,handler:function(){var t=e(this);s._onCollapse(t)}})},_bindListeners:function(){for(var t=this,s=0,i=t.listeners.length;i>s;s++)e(t.listeners[s].selector).on(t.listeners[s].eventType,t.listeners[s].handler)},_unbindListeners:function(){for(var t=this,s=0,i=t.listeners.length;i>s;s++)e(t.listeners[s].selector).off(t.listeners[s].eventType,t.listeners[s].handler);t.listeners=[]},_getData:function(t){var s=this,i=[];return s.elements.sections.each(function(n){var o=e(this),r=o.find(s.params.sectionHeaderWrapper),a=o.find(s.params.sectionHeader);i[n]={element:a,position:r[0].offsetTop,width:r.outerWidth(),height:r.outerHeight()},t&&o.attr("data-yostick-section-id",n)}),i},_onScroll:function(){var e=this,t=e.elements.scroller.scrollTop();e._apply(e._getCurrentSection(t),t)},_getCurrentSection:function(e){for(var t,s,i=this,n=0,o=i.data.length;o>n;n++)if(t=i.data[n],s=i.data[n+1],t.position<e&&(s.position>e||n+1==o))return n},_apply:function(e,t){for(var s,i,n,o=this.params,r=this.data[e],a=this.data[e+1],l=0,c=this.data.length;c>l;l++)i=[],l==e?(n=0,i.push(o.sectionTitleIsSticked),a.position<t+r.height&&(n=a.position-t-r.height,i.push(o.sectionTitleIsHustled)),s={position:"absolute",top:0,width:this.data[l].width+"px",transform:"translateY("+n+"px)"}):s={position:"relative",top:"auto",transform:"none"},this.data[l].element.removeClass([o.sectionTitleIsSticked,o.sectionTitleIsHustled].join(" ")).addClass(i.join(" ")).css(s)},_onCollapse:function(e){var t,s,i=this,n=i.elements.scroller,o=n.scrollTop(),r=e.closest(i.params.section),a=+r.attr("data-yostick-section-id"),l=o;r.hasClass(i.params.sectionIsCollapsed)?r.removeClass(i.params.sectionIsCollapsed):r.addClass(i.params.sectionIsCollapsed),i.data=i._getData(),t=i.data[a],s=i.data[a+1],t.position<o?l=t.position:s&&s.position<o+t.height&&(l=s.position-o-t.height),n.scrollTop(l),i._apply(i._getCurrentSection(l),l)},update:function(){var e,t=this;t.elements={scroller:t.root.find(t.params.scroller),sections:t.root.find(t.params.section)},t._unbindListeners(),t._getHandlers(),t._bindListeners(),t.data=t._getData(!0),e=t.elements.scroller.scrollTop(),t._apply(t._getCurrentSection(e),e)},destroy:function(){var t=this;t._unbindListeners(),t.elements.sections.each(function(){var s=e(this);s.removeAttr("data-yostick-section-id").find(t.params.sectionHeader).removeClass([t.params.sectionIsCollapsed,t.params.sectionTitleIsSticked,t.params.sectionTitleIsHustled].join(" ")).attr("style","")}),delete t.root[0].yostick}};s.prototype=i,window.yostick=s,e.fn.yostick=function(t){var n=arguments;return i[t]?this.each(function(){var e=this&&this.yostick;e&&i[t].apply(e,Array.prototype.slice.call(n,1))}):"object"!=typeof t&&t?void e.error("Unknown method: "+t):this.each(function(){this.yostick=new s(e(this),n[0])})}}}(jQuery);