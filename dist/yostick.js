!function(e){function t(i,o){var n=this instanceof t?this:e.extend({},s),a=n,r=e.extend({scroller:".scroller",section:".article",sectionContent:".article__list",sectionHeaderWrapper:".article__header",sectionHeader:".article__header-in",sectionIsCollapsed:"_collapsed",sectionTitleIsSticked:"_sticked",sectionTitleIsHustled:"_hustled",collapseOnClick:!0},o);a.params=r,a.root=i,a.elements={scroller:i.find(r.scroller),sections:i.find(r.section)},a.data=a._getData(!0),a.listeners=[],a._getHandlers(),a._setListeners()}if("undefined"!=typeof window){var s={_getHandlers:function(){var t=this;t.listeners.push({eventType:"scroll",selector:t.params.scroller,handler:function(){var s=e(this);t._onScroll(s)}}),t.params.collapseOnClick&&t.listeners.push({eventType:"click",selector:t.params.sectionHeader,handler:function(){var s=e(this);t._onCollapse(s)}})},_setListeners:function(){for(var t=this,s=0,i=t.listeners.length;i>s;s++)e(t.listeners[s].selector).on(t.listeners[s].eventType,t.listeners[s].handler)},_getData:function(t){var s=this,i=[];return s.elements.sections.each(function(o){var n=e(this),a=n.find(s.params.sectionHeaderWrapper);sectionHeader=n.find(s.params.sectionHeader),i[o]={element:sectionHeader,position:a[0].offsetTop,width:a.outerWidth(),height:a.outerHeight()},t&&n.attr("data-yostick-section-id",o)}),i},_onScroll:function(){var e=this,t=e.elements.scroller.scrollTop();e._apply(e._getCurrentSection(t),t)},_getCurrentSection:function(e){for(var t,s,i=this,o=0,n=i.data.length;n>o;o++)if(t=i.data[o],s=i.data[o+1],t.position<e&&(s.position>e||o+1==n))return o},_apply:function(e,t){for(var s,i,o,n=this.params,a=this.data[e],r=this.data[e+1],l=0,c=this.data.length;c>l;l++)i=[],l==e?(o=0,i.push(n.sectionTitleIsSticked),r.position<t+a.height&&(o=r.position-t-a.height,i.push(n.sectionTitleIsHustled)),s={position:"absolute",top:0,transform:"translateY("+o+"px)"}):s={position:"relative",top:"auto",transform:"none"},this.data[l].element.removeClass([n.sectionTitleIsSticked,n.sectionTitleIsHustled].join(" ")).addClass(i.join(" ")).css(s)},_onCollapse:function(e){var t,s,i=this,o=i.elements.scroller,n=o.scrollTop(),a=e.closest(i.params.section),r=+a.attr("data-yostick-section-id"),l=n;a.hasClass(i.params.sectionIsCollapsed)?a.removeClass(i.params.sectionIsCollapsed):a.addClass(i.params.sectionIsCollapsed),i.data=i._getData(),t=i.data[r],s=i.data[r+1],t.position<n?l=t.position:s&&s.position<n+t.height&&(l=s.position-n-t.height),o.scrollTop(l),i._apply(i._getCurrentSection(l),l)}};window.yostick=t,e.fn.yostick=function(i){var o=arguments;return s[i]?s[i].apply(this,Array.prototype.slice.call(o,1)):"object"!=typeof i&&i?void e.error("Unknown method: "+i):this.each(function(){console.log(new t(e(this),o))})}}}(jQuery);