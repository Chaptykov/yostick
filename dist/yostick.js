!function(e){function t(e,t,s,n){3==arguments.length&&"boolean"!=typeof s&&(n=s,s=!1);var i;return function(){var o=arguments;n=n||this,s&&!i&&e.apply(n,o),clearTimeout(i),i=setTimeout(function(){s||e.apply(n,o),i=null},t)}}function s(t,n){var i=this instanceof s?this:e.extend({},s.prototype),o=i,a=e.extend({scroller:".yostick__scroller",section:".yostick__section",sectionContent:".yostick__list",sectionHeaderWrapper:".yostick__section-header",sectionHeader:".yostick__section-header-in",sectionIsCollapsed:"_collapsed",sectionTitleIsSticked:"_sticked",sectionTitleIsHustled:"_hustled",collapseOnClick:!0},n);o.params=a,o.root=t,o.elements={scroller:t.find(a.scroller),sections:t.find(a.section)},o.data=o._getData(!0),o.listeners=[],o._getHandlers(),o._bindListeners()}if("undefined"!=typeof window){var n={_getHandlers:function(){var s=this;s.listeners.push({eventType:"scroll",selector:s.params.scroller,handler:function(){s._onScroll()}}),s.listeners.push({eventType:"resize",selector:"html, body",handler:t(s.update,1e3)}),s.params.collapseOnClick&&s.listeners.push({eventType:"click",selector:s.params.sectionHeader,handler:function(){var t=e(this);s._onCollapse(t)}})},_bindListeners:function(){for(var t=this,s=0,n=t.listeners.length;n>s;s++)e(t.listeners[s].selector).on(t.listeners[s].eventType,t.listeners[s].handler)},_unbindListeners:function(){for(var t=this,s=0,n=t.listeners.length;n>s;s++)e(t.listeners[s].selector).off(t.listeners[s].eventType,t.listeners[s].handler);t.listeners=[]},_getData:function(t){var s=this,n=[];return s.elements.sections.each(function(i){var o=e(this),a=o.find(s.params.sectionHeaderWrapper),r=o.find(s.params.sectionHeader);n[i]={element:r,position:a[0].offsetTop,width:a.outerWidth(),height:a.outerHeight()},t&&o.attr("data-yostick-section-id",i)}),n},_onScroll:function(){var e=this,t=e.elements.scroller.scrollTop();e._apply(e._getCurrentSection(t),t)},_getCurrentSection:function(e){for(var t,s,n=this,i=0,o=n.data.length;o>i;i++)if(t=n.data[i],s=n.data[i+1],t.position<e&&(s.position>e||i+1==o))return i},_apply:function(e,t){for(var s,n,i,o=this.params,a=this.data[e],r=this.data[e+1],l=0,c=this.data.length;c>l;l++)n=[],l==e?(i=0,n.push(o.sectionTitleIsSticked),r.position<t+a.height&&(i=r.position-t-a.height,n.push(o.sectionTitleIsHustled)),s={position:"absolute",top:0,width:this.data[l].width+"px",transform:"translateY("+i+"px)"}):s={position:"relative",top:"auto",transform:"none"},this.data[l].element.removeClass([o.sectionTitleIsSticked,o.sectionTitleIsHustled].join(" ")).addClass(n.join(" ")).css(s)},_onCollapse:function(e){var t,s,n=this,i=n.elements.scroller,o=i.scrollTop(),a=e.closest(n.params.section),r=+a.attr("data-yostick-section-id"),l=o;a.hasClass(n.params.sectionIsCollapsed)?a.removeClass(n.params.sectionIsCollapsed):a.addClass(n.params.sectionIsCollapsed),n.data=n._getData(),t=n.data[r],s=n.data[r+1],t.position<o?l=t.position:s&&s.position<o+t.height&&(l=s.position-o-t.height),i.scrollTop(l),n._apply(n._getCurrentSection(l),l),n.params.onCollapse&&n.params.onCollapse()},update:function(){var e,t=this;t.elements={scroller:t.root.find(t.params.scroller),sections:t.root.find(t.params.section)},t._unbindListeners(),t._getHandlers(),t._bindListeners(),t.data=t._getData(!0),e=t.elements.scroller.scrollTop(),t._apply(t._getCurrentSection(e),e)},destroy:function(){var t=this;t._unbindListeners(),t.elements.sections.each(function(){var s=e(this);s.removeAttr("data-yostick-section-id").find(t.params.sectionHeader).removeClass([t.params.sectionIsCollapsed,t.params.sectionTitleIsSticked,t.params.sectionTitleIsHustled].join(" ")).attr("style","")}),delete t.root[0].yostick}};s.prototype=n,window.yostick=s,e.fn.yostick=function(t){var i=arguments;return n[t]?this.each(function(){var e=this&&this.yostick;e&&n[t].apply(e,Array.prototype.slice.call(i,1))}):"object"!=typeof t&&t?void e.error("Unknown method: "+t):this.each(function(){this.yostick=new s(e(this),i[0])})}}}(jQuery);