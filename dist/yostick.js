!function(t){function e(s,i){var o=this instanceof e?this:t.extend({},e.prototype),n=o,a=t.extend({scroller:".yostick__scroller",section:".yostick__section",sectionContent:".yostick__list",sectionHeaderWrapper:".yostick__section-header",sectionHeader:".yostick__section-header-in",sectionIsCollapsed:"_collapsed",sectionTitleIsSticked:"_sticked",sectionTitleIsHustled:"_hustled",collapseOnClick:!0},i);n.params=a,n.root=s,n.elements={scroller:s.find(a.scroller),sections:s.find(a.section)},n.data=n._getData(!0),n.listeners=[],n._getHandlers(),n._setListeners()}if("undefined"!=typeof window){var s={_getHandlers:function(){var e=this;e.listeners.push({eventType:"scroll",selector:e.params.scroller,handler:function(){var s=t(this);e._onScroll(s)}}),e.params.collapseOnClick&&e.listeners.push({eventType:"click",selector:e.params.sectionHeader,handler:function(){var s=t(this);e._onCollapse(s)}})},_setListeners:function(){for(var e=this,s=0,i=e.listeners.length;i>s;s++)t(e.listeners[s].selector).on(e.listeners[s].eventType,e.listeners[s].handler)},_getData:function(e){var s=this,i=[];return s.elements.sections.each(function(o){var n=t(this),a=n.find(s.params.sectionHeaderWrapper),r=n.find(s.params.sectionHeader);i[o]={element:r,position:a[0].offsetTop,width:a.outerWidth(),height:a.outerHeight()},e&&n.attr("data-yostick-section-id",o)}),i},_onScroll:function(){var t=this,e=t.elements.scroller.scrollTop();t._apply(t._getCurrentSection(e),e)},_getCurrentSection:function(t){for(var e,s,i=this,o=0,n=i.data.length;n>o;o++)if(e=i.data[o],s=i.data[o+1],e.position<t&&(s.position>t||o+1==n))return o},_apply:function(t,e){for(var s,i,o,n=this.params,a=this.data[t],r=this.data[t+1],l=0,c=this.data.length;c>l;l++)i=[],l==t?(o=0,i.push(n.sectionTitleIsSticked),r.position<e+a.height&&(o=r.position-e-a.height,i.push(n.sectionTitleIsHustled)),s={position:"absolute",top:0,width:this.data[l].width+"px",transform:"translateY("+o+"px)"}):s={position:"relative",top:"auto",transform:"none"},this.data[l].element.removeClass([n.sectionTitleIsSticked,n.sectionTitleIsHustled].join(" ")).addClass(i.join(" ")).css(s)},_onCollapse:function(t){var e,s,i=this,o=i.elements.scroller,n=o.scrollTop(),a=t.closest(i.params.section),r=+a.attr("data-yostick-section-id"),l=n;a.hasClass(i.params.sectionIsCollapsed)?a.removeClass(i.params.sectionIsCollapsed):a.addClass(i.params.sectionIsCollapsed),i.data=i._getData(),e=i.data[r],s=i.data[r+1],e.position<n?l=e.position:s&&s.position<n+e.height&&(l=s.position-n-e.height),o.scrollTop(l),i._apply(i._getCurrentSection(l),l)}};e.prototype=s,window.yostick=e,t.fn.yostick=function(i){var o=arguments;return s[i]?this.each(function(){var t=this&&this.yostick;t&&s[i].apply(t,Array.prototype.slice.call(o,1))}):"object"!=typeof i&&i?void t.error("Unknown method: "+i):this.each(function(){this.yostick=new e(t(this),o)})}}}(jQuery);